{
  "query": "CREATE TABLE `automationExecutions` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`ruleId` varchar(36) NOT NULL,\n\t`threadId` varchar(36),\n\t`personId` varchar(36),\n\t`status` enum('success','failed','skipped') NOT NULL,\n\t`executedAt` timestamp NOT NULL DEFAULT (now()),\n\t`errorMessage` text,\n\t`metadata` json DEFAULT ('{}'),\n\tCONSTRAINT `automationExecutions_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `automationRules` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`name` text NOT NULL,\n\t`description` text,\n\t`triggerType` enum('email_opened','email_replied','no_reply_after_days','meeting_held','stage_entered','deal_value_threshold') NOT NULL,\n\t`triggerConfig` json DEFAULT ('{}'),\n\t`actionType` enum('move_stage','send_notification','create_task','enroll_sequence','update_field') NOT NULL,\n\t`actionConfig` json DEFAULT ('{}'),\n\t`status` enum('active','paused') NOT NULL DEFAULT 'active',\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `automationRules_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `emailSequenceEnrollments` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`sequenceId` varchar(36) NOT NULL,\n\t`personId` varchar(36) NOT NULL,\n\t`threadId` varchar(36),\n\t`currentStep` int NOT NULL DEFAULT 0,\n\t`status` enum('active','completed','paused','unsubscribed') NOT NULL DEFAULT 'active',\n\t`enrolledAt` timestamp NOT NULL DEFAULT (now()),\n\t`completedAt` timestamp,\n\t`lastEmailSentAt` timestamp,\n\t`nextEmailScheduledAt` timestamp,\n\t`totalOpens` int NOT NULL DEFAULT 0,\n\t`totalReplies` int NOT NULL DEFAULT 0,\n\tCONSTRAINT `emailSequenceEnrollments_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `emailSequenceEvents` (\n\t`id` varchar(36) NOT NULL,\n\t`enrollmentId` varchar(36) NOT NULL,\n\t`stepNumber` int NOT NULL,\n\t`eventType` enum('sent','opened','replied','bounced','unsubscribed') NOT NULL,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\t`metadata` json DEFAULT ('{}'),\n\tCONSTRAINT `emailSequenceEvents_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `emailSequenceSteps` (\n\t`id` varchar(36) NOT NULL,\n\t`sequenceId` varchar(36) NOT NULL,\n\t`stepNumber` int NOT NULL,\n\t`subject` text NOT NULL,\n\t`body` text NOT NULL,\n\t`delayDays` int NOT NULL DEFAULT 0,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `emailSequenceSteps_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `emailSequences` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`name` text NOT NULL,\n\t`description` text,\n\t`status` enum('active','paused','archived') NOT NULL DEFAULT 'active',\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `emailSequences_id` PRIMARY KEY(`id`)\n);\n\nCREATE INDEX `tenant_rule_idx` ON `automationExecutions` (`tenantId`,`ruleId`);\nCREATE INDEX `tenant_thread_idx` ON `automationExecutions` (`tenantId`,`threadId`);\nCREATE INDEX `tenant_executed_idx` ON `automationExecutions` (`tenantId`,`executedAt`);\nCREATE INDEX `tenant_status_idx` ON `automationRules` (`tenantId`,`status`);\nCREATE INDEX `tenant_trigger_idx` ON `automationRules` (`tenantId`,`triggerType`);\nCREATE INDEX `tenant_sequence_idx` ON `emailSequenceEnrollments` (`tenantId`,`sequenceId`);\nCREATE INDEX `tenant_person_idx` ON `emailSequenceEnrollments` (`tenantId`,`personId`);\nCREATE INDEX `tenant_status_idx` ON `emailSequenceEnrollments` (`tenantId`,`status`);\nCREATE INDEX `tenant_scheduled_idx` ON `emailSequenceEnrollments` (`tenantId`,`nextEmailScheduledAt`);\nCREATE INDEX `enrollment_timestamp_idx` ON `emailSequenceEvents` (`enrollmentId`,`timestamp`);\nCREATE INDEX `enrollment_step_idx` ON `emailSequenceEvents` (`enrollmentId`,`stepNumber`);\nCREATE INDEX `sequence_step_idx` ON `emailSequenceSteps` (`sequenceId`,`stepNumber`);\nCREATE INDEX `tenant_status_idx` ON `emailSequences` (`tenantId`,`status`);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2QkRhwd4AVTLhHG.a0950ca1ba2f --database TQEsx2HByTQrcAiUBn2kww --execute CREATE TABLE `automationExecutions` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`ruleId` varchar(36) NOT NULL,\n\t`threadId` varchar(36),\n\t`personId` varchar(36),\n\t`status` enum('success','failed','skipped') NOT NULL,\n\t`executedAt` timestamp NOT NULL DEFAULT (now()),\n\t`errorMessage` text,\n\t`metadata` json DEFAULT ('{}'),\n\tCONSTRAINT `automationExecutions_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `automationRules` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`name` text NOT NULL,\n\t`description` text,\n\t`triggerType` enum('email_opened','email_replied','no_reply_after_days','meeting_held','stage_entered','deal_value_threshold') NOT NULL,\n\t`triggerConfig` json DEFAULT ('{}'),\n\t`actionType` enum('move_stage','send_notification','create_task','enroll_sequence','update_field') NOT NULL,\n\t`actionConfig` json DEFAULT ('{}'),\n\t`status` enum('active','paused') NOT NULL DEFAULT 'active',\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `automationRules_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `emailSequenceEnrollments` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`sequenceId` varchar(36) NOT NULL,\n\t`personId` varchar(36) NOT NULL,\n\t`threadId` varchar(36),\n\t`currentStep` int NOT NULL DEFAULT 0,\n\t`status` enum('active','completed','paused','unsubscribed') NOT NULL DEFAULT 'active',\n\t`enrolledAt` timestamp NOT NULL DEFAULT (now()),\n\t`completedAt` timestamp,\n\t`lastEmailSentAt` timestamp,\n\t`nextEmailScheduledAt` timestamp,\n\t`totalOpens` int NOT NULL DEFAULT 0,\n\t`totalReplies` int NOT NULL DEFAULT 0,\n\tCONSTRAINT `emailSequenceEnrollments_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `emailSequenceEvents` (\n\t`id` varchar(36) NOT NULL,\n\t`enrollmentId` varchar(36) NOT NULL,\n\t`stepNumber` int NOT NULL,\n\t`eventType` enum('sent','opened','replied','bounced','unsubscribed') NOT NULL,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\t`metadata` json DEFAULT ('{}'),\n\tCONSTRAINT `emailSequenceEvents_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `emailSequenceSteps` (\n\t`id` varchar(36) NOT NULL,\n\t`sequenceId` varchar(36) NOT NULL,\n\t`stepNumber` int NOT NULL,\n\t`subject` text NOT NULL,\n\t`body` text NOT NULL,\n\t`delayDays` int NOT NULL DEFAULT 0,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `emailSequenceSteps_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `emailSequences` (\n\t`id` varchar(36) NOT NULL,\n\t`tenantId` varchar(36) NOT NULL,\n\t`name` text NOT NULL,\n\t`description` text,\n\t`status` enum('active','paused','archived') NOT NULL DEFAULT 'active',\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `emailSequences_id` PRIMARY KEY(`id`)\n);\n\nCREATE INDEX `tenant_rule_idx` ON `automationExecutions` (`tenantId`,`ruleId`);\nCREATE INDEX `tenant_thread_idx` ON `automationExecutions` (`tenantId`,`threadId`);\nCREATE INDEX `tenant_executed_idx` ON `automationExecutions` (`tenantId`,`executedAt`);\nCREATE INDEX `tenant_status_idx` ON `automationRules` (`tenantId`,`status`);\nCREATE INDEX `tenant_trigger_idx` ON `automationRules` (`tenantId`,`triggerType`);\nCREATE INDEX `tenant_sequence_idx` ON `emailSequenceEnrollments` (`tenantId`,`sequenceId`);\nCREATE INDEX `tenant_person_idx` ON `emailSequenceEnrollments` (`tenantId`,`personId`);\nCREATE INDEX `tenant_status_idx` ON `emailSequenceEnrollments` (`tenantId`,`status`);\nCREATE INDEX `tenant_scheduled_idx` ON `emailSequenceEnrollments` (`tenantId`,`nextEmailScheduledAt`);\nCREATE INDEX `enrollment_timestamp_idx` ON `emailSequenceEvents` (`enrollmentId`,`timestamp`);\nCREATE INDEX `enrollment_step_idx` ON `emailSequenceEvents` (`enrollmentId`,`stepNumber`);\nCREATE INDEX `sequence_step_idx` ON `emailSequenceSteps` (`sequenceId`,`stepNumber`);\nCREATE INDEX `tenant_status_idx` ON `emailSequences` (`tenantId`,`status`);",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 10 column 31 near \"'{}'),",
    "\tCONSTRAINT `automationExecutions_id` PRIMARY KEY(`id`)",
    ")\""
  ]
}