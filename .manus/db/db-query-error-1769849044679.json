{
  "query": "ALTER TABLE `integrations` MODIFY COLUMN `provider` enum('google','amplemarket','whatsapp','apollo') NOT NULL;\nALTER TABLE `moments` MODIFY COLUMN `type` enum('email_sent','email_received','reply_received','call_completed','meeting_held','note_added','signal_detected','lead_captured','deal_won','deal_lost') NOT NULL;\nALTER TABLE `threads` MODIFY COLUMN `status` enum('active','waiting','dormant','closed') NOT NULL DEFAULT 'active';\nALTER TABLE `moments` ADD `externalId` varchar(255);\nALTER TABLE `moments` ADD `externalSource` varchar(50);\nALTER TABLE `nextActions` ADD `assignedUserId` int;\nALTER TABLE `nextActions` ADD `dueAt` timestamp;\nALTER TABLE `threads` ADD `ownerUserId` int;\nALTER TABLE `threads` ADD `collaboratorUserIds` json;\nALTER TABLE `threads` ADD `visibility` varchar(20) DEFAULT 'private';\nALTER TABLE `threads` ADD `dealSignal` json;\nCREATE INDEX `tenant_assigned_idx` ON `nextActions` (`tenantId`,`assignedUserId`,`status`);\nCREATE INDEX `tenant_due_idx` ON `nextActions` (`tenantId`,`dueAt`);\nCREATE INDEX `tenant_owner_idx` ON `threads` (`tenantId`,`ownerUserId`);\nCREATE INDEX `tenant_visibility_idx` ON `threads` (`tenantId`,`visibility`);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2QkRhwd4AVTLhHG.a0950ca1ba2f --database TQEsx2HByTQrcAiUBn2kww --execute ALTER TABLE `integrations` MODIFY COLUMN `provider` enum('google','amplemarket','whatsapp','apollo') NOT NULL;\nALTER TABLE `moments` MODIFY COLUMN `type` enum('email_sent','email_received','reply_received','call_completed','meeting_held','note_added','signal_detected','lead_captured','deal_won','deal_lost') NOT NULL;\nALTER TABLE `threads` MODIFY COLUMN `status` enum('active','waiting','dormant','closed') NOT NULL DEFAULT 'active';\nALTER TABLE `moments` ADD `externalId` varchar(255);\nALTER TABLE `moments` ADD `externalSource` varchar(50);\nALTER TABLE `nextActions` ADD `assignedUserId` int;\nALTER TABLE `nextActions` ADD `dueAt` timestamp;\nALTER TABLE `threads` ADD `ownerUserId` int;\nALTER TABLE `threads` ADD `collaboratorUserIds` json;\nALTER TABLE `threads` ADD `visibility` varchar(20) DEFAULT 'private';\nALTER TABLE `threads` ADD `dealSignal` json;\nCREATE INDEX `tenant_assigned_idx` ON `nextActions` (`tenantId`,`assignedUserId`,`status`);\nCREATE INDEX `tenant_due_idx` ON `nextActions` (`tenantId`,`dueAt`);\nCREATE INDEX `tenant_owner_idx` ON `threads` (`tenantId`,`ownerUserId`);\nCREATE INDEX `tenant_visibility_idx` ON `threads` (`tenantId`,`visibility`);",
  "returncode": 1,
  "logs": [
    "ERROR 1060 (42S21) at line 6: Duplicate column name 'assignedUserId'"
  ]
}